# 🎵 Witly Music - Türkçe Kurulum Rehberi

Bu rehber, Witly Music uygulamasını sıfırdan kurup çalıştırmak için gerekli tüm adımları içerir.

## 📋 Gerekli Programlar

Başlamadan önce şunların yüklü olduğundan emin olun:

- **Node.js** (v18 veya üzeri) - https://nodejs.org/
- **npm** (Node.js ile birlikte gelir)
- **Git** - https://git-scm.com/
- **React Native CLI** - `npm install -g react-native-cli`

### Android için:
- **Android Studio** - https://developer.android.com/studio
- **JDK 11** veya üzeri

### iOS için (sadece macOS):
- **Xcode** 12 veya üzeri
- **CocoaPods** - `sudo gem install cocoapods`

## 🚀 Adım Adım Kurulum

### 1️⃣ Proje Dosyalarını Hazırlayın

Proje dosyalarınız zaten `C:\Users\emref\Desktop\Witly Music` klasöründe.

### 2️⃣ Backend Kurulumu

#### a) Backend bağımlılıklarını yükleyin:

```powershell
cd "C:\Users\emref\Desktop\Witly Music\backend"
npm install
```

#### b) Environment dosyası oluşturun:

```powershell
# env.example.txt dosyasını .env olarak kopyalayın
copy env.example.txt .env
```

#### c) `.env` dosyasını düzenleyin:

`.env` dosyasını bir metin editörü ile açın ve şu değerleri doldurun:

```env
# Sunucu Ayarları
PORT=3000
NODE_ENV=development

# PocketBase Ayarları (önce PocketBase kurulumu yapacağız)
POCKETBASE_URL=http://127.0.0.1:8090
POCKETBASE_ADMIN_EMAIL=admin@witlydesign.com
POCKETBASE_ADMIN_PASSWORD=admin123456

# Spotify API (opsiyonel - daha sonra ekleyeceğiz)
SPOTIFY_CLIENT_ID=
SPOTIFY_CLIENT_SECRET=

# JWT Secret
JWT_SECRET=witly_music_secret_key_2025
```

**Not:** Spotify API anahtarlarını daha sonra ekleyeceğiz. Şimdilik boş bırakabilirsiniz.

### 3️⃣ PocketBase Kurulumu

#### a) PocketBase'i indirin:

Windows için: https://github.com/pocketbase/pocketbase/releases/latest

`pocketbase_x.x.x_windows_amd64.zip` dosyasını indirin.

#### b) PocketBase'i çıkartın:

1. İndirdiğiniz zip dosyasını `C:\Users\emref\Desktop\Witly Music\pocketbase` klasörüne çıkartın
2. `pocketbase.exe` dosyasını göreceksiniz

#### c) PocketBase'i çalıştırın:

```powershell
cd "C:\Users\emref\Desktop\Witly Music\pocketbase"
.\pocketbase.exe serve
```

PocketBase `http://127.0.0.1:8090` adresinde çalışmaya başlayacak.

#### d) Admin hesabı oluşturun:

1. Tarayıcınızda `http://127.0.0.1:8090/_/` adresine gidin
2. İlk admin hesabını oluşturun:
   - **Email**: `admin@witlydesign.com`
   - **Password**: `admin123456` (veya daha güvenli bir şifre)
3. "Create and Login" butonuna tıklayın

#### e) Collection'ları oluşturun:

PocketBase admin panelinde şu collection'ları manuel olarak oluşturmanız gerekiyor:

##### Collection 1: users
Bu otomatik olarak oluşturulmuş olmalı. "Collections" menüsünden kontrol edin.

##### Collection 2: tracks
1. "New collection" > "Base collection"
2. **Name**: `tracks`
3. **Fields** ekleyin:
   - `externalId` - Text, Required
   - `title` - Text, Required
   - `artist` - Text, Required
   - `album` - Text
   - `duration` - Number
   - `coverImage` - URL
   - `source` - Select (Options: deezer, spotify)
   - `previewUrl` - URL
4. "Create" butonuna tıklayın

##### Collection 3: playlists
1. "New collection" > "Base collection"
2. **Name**: `playlists`
3. **Fields**:
   - `name` - Text, Required
   - `description` - Editor
   - `user` - Relation (users, Single, Required)
   - `tracks` - Relation (tracks, Multiple)
   - `isPublic` - Bool (Default: false)
   - `coverImage` - URL
4. "Create"

##### Collection 4: favorites
1. "New collection" > "Base collection"
2. **Name**: `favorites`
3. **Fields**:
   - `user` - Relation (users, Single, Required)
   - `track` - Relation (tracks, Single, Required)
4. "Create"

##### Collection 5: listening_history
1. "New collection" > "Base collection"
2. **Name**: `listening_history`
3. **Fields**:
   - `user` - Relation (users, Single, Required)
   - `track` - Relation (tracks, Single, Required)
   - `playedAt` - Date
4. "Create"

**Tebrikler!** PocketBase kurulumu tamamlandı. PocketBase'i çalışır durumda bırakın.

### 4️⃣ Spotify API Anahtarı Alma (Opsiyonel ama önerilen)

#### a) Spotify Developer Dashboard'a gidin:

https://developer.spotify.com/dashboard

#### b) Spotify hesabınızla giriş yapın

Hesabınız yoksa ücretsiz oluşturabilirsiniz.

#### c) Yeni uygulama oluşturun:

1. "Create app" butonuna tıklayın
2. Bilgileri doldurun:
   - **App name**: Witly Music
   - **App description**: Music streaming app
   - **Redirect URI**: `http://localhost:3000/callback`
3. "Web API" seçin
4. Kullanım şartlarını kabul edin
5. "Save" edin

#### d) API anahtarlarını alın:

1. Oluşturduğunuz app'e tıklayın
2. "Settings" butonuna tıklayın
3. **Client ID** ve **Client Secret** değerlerini kopyalayın
4. Backend `.env` dosyasına ekleyin:

```env
SPOTIFY_CLIENT_ID=buraya_client_id_yapıştırın
SPOTIFY_CLIENT_SECRET=buraya_client_secret_yapıştırın
```

### 5️⃣ Backend'i Başlatın

Yeni bir PowerShell penceresi açın:

```powershell
cd "C:\Users\emref\Desktop\Witly Music\backend"
npm run dev
```

Backend `http://localhost:3000` adresinde çalışmaya başlayacak.

**Test edin:**

Tarayıcınızda `http://localhost:3000/health` adresine gidin. Şunu görmelisiniz:

```json
{
  "status": "OK",
  "message": "Witly Music API is running"
}
```

### 6️⃣ Mobile App Kurulumu

Yeni bir PowerShell penceresi açın:

```powershell
cd "C:\Users\emref\Desktop\Witly Music\mobile"
npm install
```

Bu işlem 5-10 dakika sürebilir.

### 7️⃣ Android Kurulumu

#### a) Android SDK'yı kontrol edin:

Android Studio'yu açın ve SDK Manager'dan şunların yüklü olduğundan emin olun:
- Android SDK Platform 33
- Android SDK Build-Tools
- Android Emulator

#### b) Environment değişkenlerini ayarlayın:

Windows ortam değişkenlerine şunları ekleyin:

```
ANDROID_HOME=C:\Users\emref\AppData\Local\Android\Sdk
```

Path'e ekleyin:
```
%ANDROID_HOME%\platform-tools
%ANDROID_HOME%\tools
```

### 8️⃣ Uygulamayı Çalıştırın

#### Android Emulator ile:

1. Android Studio'yu açın
2. AVD Manager'dan bir emulator başlatın (örn: Pixel 5 API 33)
3. PowerShell'de:

```powershell
cd "C:\Users\emref\Desktop\Witly Music\mobile"
npm run android
```

İlk çalıştırmada build işlemi 10-15 dakika sürebilir.

#### Fiziksel Android cihazda:

1. Cihazınızda "Geliştirici Seçenekleri"ni etkinleştirin
2. "USB Debugging"i açın
3. Cihazı bilgisayara USB ile bağlayın
4. PowerShell'de:

```powershell
npm run android
```

## ✅ Çalıştırılması Gereken 3 Şey

Uygulama çalışırken şu 3 şey açık olmalı:

1. **PocketBase** (Terminal 1):
   ```powershell
   cd "C:\Users\emref\Desktop\Witly Music\pocketbase"
   .\pocketbase.exe serve
   ```

2. **Backend** (Terminal 2):
   ```powershell
   cd "C:\Users\emref\Desktop\Witly Music\backend"
   npm run dev
   ```

3. **Mobile App** (Terminal 3):
   ```powershell
   cd "C:\Users\emref\Desktop\Witly Music\mobile"
   npm run android
   ```

## 🎉 Tamamlandı!

Witly Music uygulamanız hazır! İşte yapabilecekleriniz:

- ✅ Yeni hesap oluşturma
- ✅ Giriş yapma
- ✅ Müzik arama (Deezer API ile)
- ✅ Şarkı dinleme (30 saniyelik preview)
- ✅ Favorilere ekleme
- ✅ Çalma listesi oluşturma
- ✅ Dinleme geçmişi

## 🐛 Sorun Giderme

### "Unable to resolve module" hatası
```powershell
cd mobile
npm start -- --reset-cache
```

### Android build hatası
```powershell
cd mobile\android
.\gradlew clean
cd ..
npm run android
```

### PocketBase bağlantı hatası
- PocketBase'in çalıştığından emin olun
- `http://127.0.0.1:8090/_/` adresinden admin paneline erişebildiğinizi kontrol edin

### Backend API hatası
- Backend'in çalıştığından emin olun
- `http://localhost:3000/health` adresini kontrol edin

## 📞 Destek

Sorun yaşarsanız:

1. Terminal çıktılarını kontrol edin
2. `README.md` ve `API_KEYS_GUIDE.md` dosyalarına bakın
3. PocketBase admin panelinde collection'ların doğru oluşturulduğunu kontrol edin

## 🎵 İyi Dinlemeler!

Artık kendi müzik streaming uygulamanız var. Keyifle kullanın!

**Made with ❤️ by Witly Design**
