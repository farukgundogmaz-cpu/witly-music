# 🔑 API Anahtarları Alımı Rehberi

Bu dokümanda, Witly Music uygulaması için gerekli API anahtarlarını nasıl alacağınız adım adım açıklanmaktadır.

## 📝 Genel Bakış

Witly Music, aşağıdaki API'leri kullanmaktadır:

1. **Spotify Web API** (Zorunlu) - Müzik içeriği
2. **Deezer API** (Opsiyonel) - Müzik içeriği (Anahtar gerektirmez)
3. **PocketBase** (Zorunlu) - Backend & Database

---

## 🎵 1. Spotify Web API

Spotify API, geniş müzik kataloğu ve gelişmiş özellikler sunar.

### Adım 1: Spotify Developer Dashboard'a Giriş

1. https://developer.spotify.com/dashboard adresine gidin
2. Spotify hesabınızla giriş yapın (yoksa ücretsiz hesap oluşturun)

### Adım 2: Yeni Uygulama Oluşturun

1. Dashboard'da **"Create app"** butonuna tıklayın
2. Uygulama bilgilerini doldurun:
   - **App name**: Witly Music
   - **App description**: Music streaming mobile application
   - **Website**: (opsiyonel)
   - **Redirect URI**: `http://localhost:3000/callback`
3. **API/SDKs** bölümünde **Web API** seçin
4. Terms of Service'i kabul edin ve **Save** edin

### Adım 3: API Anahtarlarını Alın

1. Oluşturduğunuz app'e tıklayın
2. **Settings** butonuna tıklayın
3. Şu bilgileri kopyalayın:
   - **Client ID**: `xxxxxxxxxxxxxxxxxxxxx`
   - **Client Secret**: **"View client secret"** butonuna tıklayıp gösterin ve kopyalayın

### Adım 4: Backend .env Dosyasına Ekleyin

```env
SPOTIFY_CLIENT_ID=your_client_id_here
SPOTIFY_CLIENT_SECRET=your_client_secret_here
```

### ⏱️ Süre
- **Kayıt**: ~2-3 dakika
- **Onay**: Anında
- **Ücretsiz Limit**: Günde 50,000 istek

---

## 🎧 2. Deezer API

Deezer API ücretsizdir ve API anahtarı gerektirmez!

### Özellikler
- ✅ Ücretsiz kullanım
- ✅ API anahtarı gerektirmez
- ✅ 30 saniyelik şarkı önizlemeleri
- ✅ Geniş müzik kataloğu

### Kullanım
Deezer API'yi kullanmak için herhangi bir kayıt gerekmez. Backend kodumuz doğrudan Deezer'in public API'sini kullanır:

```
https://api.deezer.com/
```

**Not:** Deezer API varsayılan olarak aktiftir ve backend'de çalışır durumda.

---

## 🗄️ 3. PocketBase

PocketBase, kendi sunucunuzda barındırdığınız bir backend çözümüdür.

### Adım 1: PocketBase İndirin

1. https://pocketbase.io/ adresine gidin
2. **Download** bölümünden işletim sisteminize uygun versiyonu indirin:
   - Windows: `pocketbase_x.x.x_windows_amd64.zip`
   - macOS: `pocketbase_x.x.x_darwin_amd64.zip`
   - Linux: `pocketbase_x.x.x_linux_amd64.zip`

### Adım 2: PocketBase'i Çalıştırın

```bash
# Windows
./pocketbase.exe serve

# macOS/Linux
./pocketbase serve
```

PocketBase varsayılan olarak `http://127.0.0.1:8090` adresinde çalışır.

### Adım 3: Admin Hesabı Oluşturun

1. Tarayıcıda `http://127.0.0.1:8090/_/` adresine gidin
2. İlk admin hesabını oluşturun:
   - **Email**: admin@witlydesign.com
   - **Password**: Güvenli bir şifre (en az 10 karakter)

### Adım 4: Collection'ları Oluşturun

[POCKETBASE_SETUP.md](./POCKETBASE_SETUP.md) dosyasını takip ederek gerekli collection'ları oluşturun:
- users
- tracks
- playlists
- favorites
- listening_history

### Adım 5: Backend .env Dosyasına Ekleyin

**Yerel development için:**
```env
POCKETBASE_URL=http://127.0.0.1:8090
POCKETBASE_ADMIN_EMAIL=admin@witlydesign.com
POCKETBASE_ADMIN_PASSWORD=your_secure_password
```

**Production için (`api1.witlydesign.com`):**
```env
POCKETBASE_URL=https://api1.witlydesign.com
POCKETBASE_ADMIN_EMAIL=admin@witlydesign.com
POCKETBASE_ADMIN_PASSWORD=your_secure_password
```

---

## ✅ Kontrol Listesi

Kurulumu tamamladıktan sonra şunları kontrol edin:

- [ ] Spotify Client ID ve Client Secret alındı
- [ ] Backend `.env` dosyası oluşturuldu ve API anahtarları eklendi
- [ ] PocketBase indirildi ve çalıştırıldı
- [ ] PocketBase admin hesabı oluşturuldu
- [ ] PocketBase collection'ları oluşturuldu ([POCKETBASE_SETUP.md](./POCKETBASE_SETUP.md))
- [ ] Backend çalıştırıldı (`npm run dev`)
- [ ] Backend health check başarılı (`http://localhost:3000/health`)

---

## 🧪 Test

### Backend Health Check

```bash
curl http://localhost:3000/health
```

Beklenen yanıt:
```json
{
  "status": "OK",
  "message": "Witly Music API is running",
  "timestamp": "2025-09-29T..."
}
```

### Spotify API Testi

```bash
curl http://localhost:3000/api/music/search?q=billie%20eilish&source=spotify
```

### Deezer API Testi

```bash
curl http://localhost:3000/api/music/search?q=billie%20eilish&source=deezer
```

---

## 🆘 Sorun Giderme

### Spotify API Hatası: "Invalid client credentials"

**Çözüm:**
- Client ID ve Client Secret'ın doğru kopyalandığından emin olun
- `.env` dosyasında boşluk veya tırnak işareti olmadığından emin olun
- Backend'i yeniden başlatın

### PocketBase Bağlantı Hatası

**Çözüm:**
- PocketBase'in çalıştığından emin olun
- `POCKETBASE_URL` değerinin doğru olduğundan emin olun
- Admin email ve password'ün doğru olduğundan emin olun

### Deezer API Rate Limit

**Çözüm:**
- Deezer API rate limit'e sahiptir
- Cache sistemi otomatik olarak çalışmaktadır
- Gerekirse cache süresini artırın (backend/services/deezer.service.js)

---

## 📞 Destek

Sorun yaşarsanız:

1. [POCKETBASE_SETUP.md](./POCKETBASE_SETUP.md) dosyasını kontrol edin
2. [README.md](./README.md) kurulum adımlarını tekrar gözden geçirin
3. GitHub issues'da sorun açın

---

**Son Güncelleme**: Eylül 2025
**Doküman Versiyonu**: 1.0.0
